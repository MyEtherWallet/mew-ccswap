import{a as p,c as h,b as m,x as v,d as D,e as E,f as R,r as x,o as P,g as q}from"./vendor.b3a10337.js";const b=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}};b();const T="modulepreload",I={},O="/",f=function(e,n){return!n||n.length===0?e():Promise.all(n.map(t=>{if(t=`${O}${t}`,t in I)return;I[t]=!0;const i=t.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${a}`))return;const o=document.createElement("link");if(o.rel=i?"stylesheet":T,i||(o.as="script",o.crossOrigin=""),o.href=t,document.head.appendChild(o),i)return new Promise((l,u)=>{o.addEventListener("load",l),o.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>e())},U=["USD","EUR","CAD","JPY","GBP","RUB","AUD","KRW","CHF","CZK","DKK","NOK","NZD","PLN","SEK","TRY","ZAR","HUF"],w=["BTC","ETH","BNB","MATIC"],C=function(r=42){return{get:function(e,n){return e.hasOwnProperty(n)?e[n]:r}}},S={USD:50,EUR:50},L={USD:2e4,EUR:2e4},k=new Proxy(S,C(50)),B=new Proxy(L,C(2e4));let y={validFiat:{}.FIAT_CURRENCIES.split(",")||U,validDigital:{}.DIGITAL_CURRENCIES.split(",")||w,minFiat:k,maxFiat:B},g={url:{}.API_HOST||"http://localhost:3000/"},j={siteKey:{}.RECAPTCHA_SITE_KEY||""},_=r=>p.post(`${g.url}/quote`,r),z=r=>p.post(`${g.url}/order`,r),$=r=>p.get(`${g.url}/exchange-rates/`);var c=Object.freeze({fiat_amount:1,digital_amount:2,fiat_currency:3,digital_currency:4});let K=r=>!r.status.invalidFiatAmount||!r.status.invalidDigitalAmount,d=(r,{state:e,dispatch:n,commit:t})=>new Promise((i,a)=>{let o=u=>{const s=u.data;if(s.error)console.error(s.result),a(s);else{t("setDigitalAmount",s.result.digital_money.amount),t("setFiatAmount",s.result.fiat_money.base_amount),t("setFiatTotal",s.result.fiat_money.total_amount),t("setInvalidDigitalAmount",!1);const F=s.result.fiat_money.total_amount<e.minFiat[e.orderInfo.fiatCurrency]||s.result.fiat_money.total_amount>e.maxFiat[e.orderInfo.fiatCurrency];t("setInvalidFiatAmount",F),t("setUserId",s.result.user_id),t("setQuoteId",s.result.quote_id),i()}},l=u=>{console.error(u),a(u)};if(K(e))switch(r){case c.fiat_amount:t("setRequestedCurrency",e.orderInfo.fiatCurrency),_({digital_currency:e.orderInfo.digitalCurrency,fiat_currency:e.orderInfo.fiatCurrency,requested_currency:e.orderInfo.fiatCurrency,requested_amount:e.orderInfo.fiatAmount}).then(o).catch(l);break;case c.fiat_currency:t("setRequestedCurrency",e.orderInfo.fiatCurrency),_({digital_currency:e.orderInfo.digitalCurrency,fiat_currency:e.orderInfo.fiatCurrency,requested_currency:e.orderInfo.digitalCurrency,requested_amount:e.orderInfo.digitalAmount}).then(o).catch(l);break;case c.digital_amount:case c.digital_currency:t("setRequestedCurrency",e.orderInfo.digitalCurrency),_({digital_currency:e.orderInfo.digitalCurrency,fiat_currency:e.orderInfo.fiatCurrency,requested_currency:e.orderInfo.digitalCurrency,requested_amount:e.orderInfo.digitalAmount}).then(o).catch(l);break}else a(new Error("canQuote false"))});var N={setCurrencyMaxAndMins({dispatch:r,commit:e,state:n}){$().then(t=>{const i=t.data.result.rates,a={},o={};y.validFiat.forEach(l=>{const u=i.find(s=>s.rate_currency===l);u&&(a[l]=u.min,o[l]=u.max)}),e("setMinFiat",a),e("setMaxFiat",o)})},saveQueryVal({dispatch:r,commit:e,state:n},t){if(t.amount&&!t.fiat)r("setDigitalAmount",+t.amount);else if(t.fiat&&!t.amount){const i=t.fiat.toUpperCase();y.validFiat.includes(i)&&r("setFiatCurrency",t.fiat.toUpperCase())}else t.amount&&t.fiat&&r("setDigitalAmount",+t.amount).then(()=>{const i=t.fiat.toUpperCase();y.validFiat.includes(i)&&r("setFiatCurrency",t.fiat.toUpperCase()).then(()=>{setTimeout(()=>{r("setDigitalAmount",+t.amount)},500)})});t.to&&r("setDigitalAddress",t.to),e("saveQueryValue",t)},setDigitalAddress({commit:r,state:e},n){let t=e.orderInfo.digitalCurrency;t=t==="BNB"||t==="MATIC"?"ETH":t,wav.validate(n,t)?(r("setDigitalAddress",n),r("setInvalidAddress",!1)):(r("setInvalidAddress",!0),r("setDigitalAddress",""))},setFiatAmount({commit:r,state:e},n){return r("setFiatAmount",n),n>=e.minFiat[e.orderInfo.fiatCurrency]&&n<=e.maxFiat[e.orderInfo.fiatCurrency]?(r("setInvalidFiatAmount",!1),r("setInvalidFiatAbove",!1),r("setInvalidFiatBelow",!1),d(c.fiat_amount,{commit:r,state:e})):(r("setInvalidFiatAmount",!0),n>=e.maxFiat[e.orderInfo.fiatCurrency]&&(r("setInvalidFiatAbove",!0),r("setInvalidFiatBelow",!1)),n<=e.minFiat[e.orderInfo.fiatCurrency]&&(r("setInvalidFiatBelow",!0),r("setInvalidFiatAbove",!1)),Promise.resolve())},setDigitalAmount({commit:r,state:e},n){return r("setDigitalAmount",n),n>0?(r("setInvalidDigitalAmount",!1),d(c.digital_amount,{commit:r,state:e})):(r("setInvalidDigitalAmount",!0),Promise.resolve())},setFiatCurrency({commit:r,state:e},n){r("setFiatCurrency",n),d(c.fiat_currency,{commit:r,state:e})},setDigitalCurrency({commit:r,state:e},n){r("setDigitalCurrency",n),d(c.digital_currency,{commit:r,state:e})}};const V=[{path:"/",name:"LandingPage",component:()=>f(()=>import("./LandingPage.aa42c9ca.js"),["assets/LandingPage.aa42c9ca.js","assets/LandingPage.8cac9dc8.css","assets/vendor.b3a10337.js"])},{path:"/status/:userId",name:"OrderStatus",component:()=>f(()=>import("./OrderStatus.4afed597.js"),["assets/OrderStatus.4afed597.js","assets/OrderStatus.b0c84c74.css","assets/vendor.b3a10337.js"]),props:!0},{path:"/:pathMatch(.*)*",name:"catchAll",component:()=>f(()=>import("./LandingPage.aa42c9ca.js"),["assets/LandingPage.aa42c9ca.js","assets/LandingPage.8cac9dc8.css","assets/vendor.b3a10337.js"])}],A=h({history:m(),routes:V});A.beforeResolve((r,e,n)=>{if(Object.keys(r.query).length>0){const i={};for(const a in r.query)i[a]=v(r.query[a]);N.dispatch("saveQueryVal",i),n()}else n()});var H=(r,e)=>{const n=r.__vccOpts||r;for(const[t,i]of e)n[t]=i;return n};const M=D({name:"App"}),Q={id:"app"};function W(r,e,n,t,i,a){const o=x("router-view");return P(),E("div",Q,[R(o)])}var Y=H(M,[["render",W]]);const Z=q(Y);Z.use(A).mount("#app");export{H as _,z as g,j as r,y as s};
